{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS/Medium/medium/src/app/components/onClickUserName.tsx"],"sourcesContent":["\"use client\";\r\nimport { redirect } from \"next/navigation\";\r\n\r\nexport default function OnClickUserName( {userAgent}: {userAgent: any}) {\r\n\r\n  const handleDashboardRedirect = () => {\r\n    redirect(\"/dashboard\");\r\n  };\r\n\r\n  return (\r\n    <span className=\"font-semibold text-gray-700 cursor-pointer\" onClick={handleDashboardRedirect}>\r\n      {userAgent.given_name || userAgent.email || \"User\"}\r\n    </span>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS,gBAAiB,EAAC,SAAS,EAAmB;IAEpE,MAAM,0BAA0B;QAC9B,IAAA,8IAAQ,EAAC;IACX;IAEA,qBACE,8OAAC;QAAK,WAAU;QAA6C,SAAS;kBACnE,UAAU,UAAU,IAAI,UAAU,KAAK,IAAI;;;;;;AAGlD","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS/Medium/medium/src/app/api/models/User.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst UserSchema = new mongoose.Schema({\r\n  auth_id: { type: String, required: true, unique: true },\r\n  email: { type: String, required: true },\r\n  family_name: String,\r\n  given_name: String,\r\n  picture: { type: String, trim: true },\r\n  lastLogin: { type: Date }\r\n});\r\n\r\nUserSchema.index({ name: 1 }); // For searching by name\r\n\r\nexport default mongoose.models.User || mongoose.model(\"User\", UserSchema);"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,aAAa,IAAI,oHAAQ,CAAC,MAAM,CAAC;IACrC,SAAS;QAAE,MAAM;QAAQ,UAAU;QAAM,QAAQ;IAAK;IACtD,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,aAAa;IACb,YAAY;IACZ,SAAS;QAAE,MAAM;QAAQ,MAAM;IAAK;IACpC,WAAW;QAAE,MAAM;IAAK;AAC1B;AAEA,WAAW,KAAK,CAAC;IAAE,MAAM;AAAE,IAAI,wBAAwB;uCAExC,oHAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,oHAAQ,CAAC,KAAK,CAAC,QAAQ","debugId":null}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS/Medium/medium/src/app/lib/mongodb.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nlet isConnected = false; // Track connection state\r\n\r\nexport async function connectDB() {\r\n  if (isConnected) {\r\n    console.log(\"‚ö° Using existing MongoDB connection\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const conn = await mongoose.connect(process.env.MONGODB_URI || \"mongodb://localhost:27017/medium-clone\", {\r\n      dbName: \"medium-clone\",\r\n    });\r\n\r\n    isConnected = conn.connections[0].readyState === 1; // 1 = connected\r\n    console.log(\"‚úÖ MongoDB connected:\", conn.connection.host);\r\n  } catch (error) {\r\n    console.error(\"‚ùå MongoDB connection error:\", error);\r\n    throw new Error(\"Failed to connect to MongoDB\");\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,IAAI,cAAc,OAAO,yBAAyB;AAE3C,eAAe;IACpB,IAAI,aAAa;QACf,QAAQ,GAAG,CAAC;QACZ;IACF;IAEA,IAAI;QACF,MAAM,OAAO,MAAM,oHAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,WAAW,IAAI,0CAA0C;YACvG,QAAQ;QACV;QAEA,cAAc,KAAK,WAAW,CAAC,EAAE,CAAC,UAAU,KAAK,GAAG,gBAAgB;QACpE,QAAQ,GAAG,CAAC,wBAAwB,KAAK,UAAU,CAAC,IAAI;IAC1D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM;IAClB;AACF","debugId":null}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS/Medium/medium/src/app/lib/syncUser.ts"],"sourcesContent":["//  syncUser.ts\r\n// Syncs the authenticated Kinde user with our MongoDB database.\r\n// \r\n// If the user does not exist in our DB, creates a new user record.\r\n// If the user exists, updates their info (e.g., last login time).  \r\n// Returns the user document from our DB.\r\n// Uses Kinde's server-side session to get the authenticated user info.\r\n\r\n\r\nimport User from \"../api/models/User\";\r\nimport { getKindeServerSession } from \"@kinde-oss/kinde-auth-nextjs/server\";\r\nimport { connectDB } from \"../lib/mongodb\";\r\n\r\nexport async function syncUser() {\r\n  await connectDB();\r\n\r\n  const { getUser } = getKindeServerSession();\r\n  const kindeUser = await getUser();\r\n  if (!kindeUser) return null;\r\n\r\n  const {\r\n    id: auth_id,\r\n    email,\r\n    family_name,\r\n    given_name,\r\n    picture,\r\n  } = kindeUser;\r\n\r\n  const user = await User.findOneAndUpdate(\r\n    { auth_id }, // match by Kinde's ID\r\n    {\r\n      auth_id,\r\n      email,\r\n      family_name,\r\n      given_name,\r\n      picture,\r\n      lastLogin: new Date(),\r\n    },\r\n    { upsert: true, new: true, setDefaultsOnInsert: true }\r\n  );\r\n\r\n  return user;\r\n}\r\n"],"names":[],"mappings":"AAAA,eAAe;AACf,gEAAgE;AAChE,GAAG;AACH,mEAAmE;AACnE,oEAAoE;AACpE,yCAAyC;AACzC,uEAAuE;;;;;AAGvE;AACA;AAAA;AACA;;;;AAEO,eAAe;IACpB,MAAM,IAAA,yIAAS;IAEf,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,+QAAqB;IACzC,MAAM,YAAY,MAAM;IACxB,IAAI,CAAC,WAAW,OAAO;IAEvB,MAAM,EACJ,IAAI,OAAO,EACX,KAAK,EACL,WAAW,EACX,UAAU,EACV,OAAO,EACR,GAAG;IAEJ,MAAM,OAAO,MAAM,8IAAI,CAAC,gBAAgB,CACtC;QAAE;IAAQ,GACV;QACE;QACA;QACA;QACA;QACA;QACA,WAAW,IAAI;IACjB,GACA;QAAE,QAAQ;QAAM,KAAK;QAAM,qBAAqB;IAAK;IAGvD,OAAO;AACT","debugId":null}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS/Medium/medium/src/app/HomeServer.tsx"],"sourcesContent":["import { getKindeServerSession } from \"@kinde-oss/kinde-auth-nextjs/server\";\r\nimport { syncUser } from \"../app/lib/syncUser\";\r\nimport Home from \"./page\";\r\n\r\n\r\n\r\nexport default async function HomeClient() {\r\n  const { getUser, isAuthenticated } = getKindeServerSession();\r\n  const user = await getUser();\r\n  await syncUser(); // Sync user with our DB to make sure we have their latest info (e.g., last login time)\r\n  const authenticated = await isAuthenticated();\r\n\r\n\r\nconst plainUser = JSON.parse(JSON.stringify(user)); // to remove Mongoose document methods\r\n// needed because PostClient is a Client Component and cannot receive Mongoose document directly\r\n// (could also use user.toObject() if it were available)\r\n\r\n  const homeElement = await Home({ user: plainUser }, { authenticated: authenticated ?? false }); // pass user and authenticated status as props\r\n  return homeElement;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;;;;AAIe,eAAe;IAC5B,MAAM,EAAE,OAAO,EAAE,eAAe,EAAE,GAAG,IAAA,+QAAqB;IAC1D,MAAM,OAAO,MAAM;IACnB,MAAM,IAAA,yIAAQ,KAAI,uFAAuF;IACzG,MAAM,gBAAgB,MAAM;IAG9B,MAAM,YAAY,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC,QAAQ,sCAAsC;IAC1F,gGAAgG;IAChG,wDAAwD;IAEtD,MAAM,cAAc,MAAM,IAAA,8HAAI,EAAC;QAAE,MAAM;IAAU,GAAG;QAAE,eAAe,iBAAiB;IAAM,IAAI,8CAA8C;IAC9I,OAAO;AACT","debugId":null}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///D:/CS/Medium/medium/src/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { RegisterLink, LoginLink, LogoutLink } from \"@kinde-oss/kinde-auth-nextjs/components\";\nimport { getKindeServerSession } from \"@kinde-oss/kinde-auth-nextjs/server\";\nimport OnClickUserName from \"./components/onClickUserName\";\nimport { syncUser } from \"../app/lib/syncUser\";\nimport HomeServer from \"./HomeServer\";\n\nexport default async function Home({ user }: { user: any | null }, { authenticated }: { authenticated: boolean | false }) {\n\n  HomeServer();\n\n  return (\n    <div className=\"flex min-h-screen flex-col bg-gray-50\">\n      {/* Top ribbon */}\n      <header className=\"w-full flex items-center justify-between bg-white shadow px-8 py-4\">\n        {/* LEFT: User avatar + name + dashboard*/}\n        <div className=\"flex items-center gap-3\">\n          {authenticated && user ? (\n            <>\n              <div className=\"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center\">\n                {user?.picture ? (\n                  // eslint-disable-next-line @next/next/no-img-element\n                  <a href=\"/dashboard\">\n                    <img\n                      src={user.picture}\n                      alt=\"Profile\"\n                      className=\"w-12 h-12 rounded-full object-cover\"\n                    />\n                  </a>\n                ) : (\n                  <span className=\"text-2xl text-gray-400\">üë§</span>\n                )}\n              </div>\n              <OnClickUserName userAgent={user} />\n              <a\n                href=\"/dashboard\"\n                className=\"rounded-xl border px-4 py-2 text-center hover:text-blue-600 focus:text-blue-600 transition\"\n              >\n                Dashboard\n              </a>\n            </>\n          ) : (\n            <span className=\"text-gray-500 font-medium\">\n              Welcome, Guest!\n            </span>\n          )}\n        </div>\n\n        {/* CENTER: Post (only if logged in) */}\n        <div className=\"flex items-center gap-4 absolute left-1/2 transform -translate-x-1/2\">\n          {authenticated && user && (\n            <>\n              <a\n                href=\"/post\"\n                className=\"rounded-xl border px-4 py-2 text-center hover:text-blue-600 focus:text-blue-600 transition\"\n              >\n                Post\n              </a>\n            </>\n          )}\n        </div>\n\n        {/* RIGHT: Auth buttons */}\n        <div className=\"flex items-center gap-4\">\n          {authenticated && user ? (\n            <LogoutLink className=\"rounded-xl border px-4 py-2 text-center hover:text-blue-600 focus:text-blue-600 transition\">\n              Logout\n            </LogoutLink>\n          ) : (\n            <>\n              <LoginLink className=\"rounded-xl border px-4 py-2 mx-2 text-center hover:text-blue-600 focus:text-blue-600 transition\">\n                Login\n              </LoginLink>\n              <RegisterLink className=\"rounded-xl border px-4 py-2 mx-2 text-center hover:text-blue-600 focus:text-blue-600 transition\">\n                Register\n              </RegisterLink>\n            </>\n          )}\n        </div>\n      </header>\n\n      {/* Main content */}\n      <main className=\"flex flex-1 w-full flex-col items-center justify-center px-4\">\n        <div className=\"flex w-full max-w-2xl flex-col items-center justify-center rounded-lg bg-white shadow-lg px-8 py-10\">\n          <h1 className=\"text-6xl font-bold mb-4 text-gray-800\">\n            Welcome to Medium!\n          </h1>\n          <p className=\"mt-3 text-2xl text-gray-700\">\n            Get started by logging in or registering\n          </p>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAEA;AAEA;AALA;;;;;AAOe,eAAe,KAAK,EAAE,IAAI,EAAwB,EAAE,EAAE,aAAa,EAAsC;IAEtH,IAAA,oIAAU;IAEV,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAO,WAAU;;kCAEhB,8OAAC;wBAAI,WAAU;kCACZ,iBAAiB,qBAChB;;8CACE,8OAAC;oCAAI,WAAU;8CACZ,MAAM,UACL,qDAAqD;kDACrD,8OAAC;wCAAE,MAAK;kDACN,cAAA,8OAAC;4CACC,KAAK,KAAK,OAAO;4CACjB,KAAI;4CACJ,WAAU;;;;;;;;;;6DAId,8OAAC;wCAAK,WAAU;kDAAyB;;;;;;;;;;;8CAG7C,8OAAC,uJAAe;oCAAC,WAAW;;;;;;8CAC5B,8OAAC;oCACC,MAAK;oCACL,WAAU;8CACX;;;;;;;yDAKH,8OAAC;4BAAK,WAAU;sCAA4B;;;;;;;;;;;kCAOhD,8OAAC;wBAAI,WAAU;kCACZ,iBAAiB,sBAChB;sCACE,cAAA,8OAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;kCAQP,8OAAC;wBAAI,WAAU;kCACZ,iBAAiB,qBAChB,8OAAC,wNAAU;4BAAC,WAAU;sCAA6F;;;;;iDAInH;;8CACE,8OAAC,sNAAS;oCAAC,WAAU;8CAAkG;;;;;;8CAGvH,8OAAC,4NAAY;oCAAC,WAAU;8CAAkG;;;;;;;;;;;;;;;;;;;0BASlI,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAwC;;;;;;sCAGtD,8OAAC;4BAAE,WAAU;sCAA8B;;;;;;;;;;;;;;;;;;;;;;;AAOrD","debugId":null}}]
}