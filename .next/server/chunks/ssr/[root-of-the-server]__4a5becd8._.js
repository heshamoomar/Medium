module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},49715,a=>{"use strict";a.s(["default",()=>v],49715);var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(a){if(null!=a)return(a=a.trim()).endsWith("/")&&(a=a.slice(0,-1)),a}let f=e(process.env.KINDE_SITE_URL),g=process.env.KINDE_POST_LOGIN_ALLOWED_URL_REGEX,h=e(process.env.NEXT_PUBLIC_KINDE_AUTH_API_PATH)||e(process.env.KINDE_AUTH_API_PATH)||"/api/auth",i=e(process.env.KINDE_POST_LOGIN_REDIRECT_URL)||e(process.env.KINDE_POST_LOGIN_URL_REDIRECT_URL),j=e(process.env.KINDE_POST_LOGOUT_REDIRECT_URL),k=e(process.env.KINDE_ISSUER_URL),l=process.env.KINDE_CLIENT_ID,m=process.env.KINDE_CLIENT_SECRET,n=process.env.KINDE_AUDIENCE,o=e(process.env.KINDE_COOKIE_DOMAIN),p=process.env.KINDE_SCOPE||"openid profile email offline",q={isDebugMode:"true"===process.env.KINDE_DEBUG_MODE,apiPath:h,initialState:{accessToken:null,idToken:null,isAuthenticated:!1,isLoading:!0,organization:null,permissions:[],user:null,userOrganizations:[],getAccessToken:()=>null,getBooleanFlag:()=>null,getClaim:()=>null,getFlag:()=>null,getIdToken:()=>null,getIntegerFlag:()=>null,getOrganization:()=>null,getPermission:()=>null,getPermissions:()=>[],getStringFlag:()=>null,getToken:()=>null,getUser:()=>null,getUserOrganizations:()=>null,refreshData:()=>null},SESSION_PREFIX:"pkce-verifier",redirectURL:f,postLoginRedirectURL:i,postLoginAllowedURLRegex:g,issuerURL:k,clientID:l,clientSecret:m,postLogoutRedirectURL:j,audience:n?n.split(" "):"",cookieDomain:o,responseType:"code",codeChallengeMethod:"S256",redirectRoutes:{callback:`${h}/kinde_callback`},issuerRoutes:{logout:"/logout",login:"/oauth2/auth",register:"/oauth2/auth",token:"/oauth2/token",profile:"/oauth2/v2/user_profile"},clientOptions:{audience:n?n.split(" "):"",authDomain:k||"",clientId:l||"",clientSecret:m||"",logoutRedirectURL:j||"",redirectURL:`${f}${h}/kinde_callback`,frameworkVersion:"2.8.6",scope:p},grantType:"AUTHORIZATION_CODE"},r=a=>a&&/^[a-zA-Z0-9_-]+$/.test(a)?a:null,s={login:r(process.env.KINDE_AUTH_LOGIN_ROUTE)||"login",logout:r(process.env.KINDE_AUTH_LOGOUT_ROUTE)||"logout",register:r(process.env.KINDE_AUTH_REGISTER_ROUTE)||"register",createOrg:r(process.env.KINDE_AUTH_CREATEORG_ROUTE)||"create_org",health:r(process.env.KINDE_AUTH_HEALTH_ROUTE)||"health",setup:r(process.env.KINDE_AUTH_SETUP_ROUTE)||"setup",portal:r(process.env.KINDE_AUTH_PORTAL_ROUTE)||"portal"};function t({children:a,postLogoutRedirectURL:c,...d}){return(0,b.jsx)("a",{href:`${q.apiPath}/${s.logout}${c?`?post_logout_redirect_url=${c}`:""}`,...d,children:a})}var u=a.i(88611);function v({user:a}){let[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),s=(0,d.useRouter)(),v=async b=>{b.preventDefault(),p(""),r(!0);try{let b=new FormData;b.append("owner_id",a._id),b.append("title",e),b.append("description",g),b.append("content",m),i&&b.append("file",i);let c=await fetch("/api/posts",{method:"POST",body:b}),d=await c.json();c.ok?(console.log("âœ… Post created with ID:",d._id),s.push("/post/"+[d._id])):p(d.error||"Aww, Failed to create post ðŸ˜¥")}catch(a){console.error("Error creating post:",a),p("Something went wrong ðŸ˜¥")}finally{r(!1)}};return(0,c.useEffect)(()=>{l(i?URL.createObjectURL(i):"")},[i]),(0,b.jsxs)("div",{className:"flex min-h-screen flex-col bg-gray-100",children:[(0,b.jsxs)("header",{className:"w-full flex items-center justify-between bg-white shadow px-8 py-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a?.picture?(0,b.jsx)("a",{href:"/dashboard",children:(0,b.jsx)("img",{src:a.picture,alt:"Profile",className:"w-12 h-12 rounded-full object-cover"})}):(0,b.jsx)("span",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-2xl text-gray-400",children:"ðŸ‘¤"}),(0,b.jsx)(u.default,{userAgent:a}),(0,b.jsx)("a",{href:"/dashboard",className:"rounded-xl border px-4 py-2 text-sm hover:text-blue-600 focus:text-blue-600 transition",children:"Dashboard"})]}),(0,b.jsx)(t,{className:"rounded-xl border px-4 py-2 text-sm hover:text-blue-600 focus:text-blue-600 transition",children:"Logout"})]}),(0,b.jsx)("main",{className:"flex flex-1 items-center justify-center px-4",children:(0,b.jsxs)("div",{className:"w-full max-w-4xl bg-white rounded-2xl shadow-lg p-10",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-8",children:"âœï¸ Create a New Post"}),(0,b.jsxs)("form",{onSubmit:v,className:"flex flex-col gap-6",children:[(0,b.jsx)("input",{type:"text",placeholder:"Post Title *",value:e,onChange:a=>f(a.target.value),className:"border rounded-lg px-5 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,b.jsx)("input",{type:"text",placeholder:"Short Description",value:g,onChange:a=>h(a.target.value),className:"border rounded-lg px-5 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,b.jsx)("input",{type:"file",placeholder:"Upload an image",accept:"image/*",onChange:a=>j(a.target.files?.[0]||null),className:"border rounded-lg px-5 py-3 text-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"}),k?(0,b.jsx)("img",{src:k,alt:"Profile",className:"w-10 h-10 rounded-full object-cover"}):(0,b.jsx)("span",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-2xl text-gray-400",children:"ðŸ–¼ï¸"}),(0,b.jsx)("textarea",{placeholder:"Write your content here... *",value:m,onChange:a=>n(a.target.value),className:"border rounded-lg px-5 py-4 text-lg min-h-[250px] focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),o&&(0,b.jsx)("p",{className:"text-red-500 font-medium",children:o}),(0,b.jsx)("button",{type:"submit",disabled:q,className:`rounded-lg px-6 py-3 text-lg font-semibold transition text-white ${q?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:q?"Publishing...":"ðŸš€ Publish Post"})]})]})})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__4a5becd8._.js.map