(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,l)=>{t.exports=e.r(76562)},96004,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(43476),l=e.i(18566);function n(e){let{userAgent:n}=e;return(0,t.jsx)("span",{className:"font-semibold text-gray-700 cursor-pointer",onClick:()=>{(0,l.redirect)("/dashboard")},children:n.given_name||n.email||"User"})}},59658,e=>{"use strict";e.s(["default",()=>b],59658);var t=e.i(43476),l=e.i(71645),n=e.i(18566),a=e.i(47167);function r(e){if(null!=e)return(e=e.trim()).endsWith("/")&&(e=e.slice(0,-1)),e}let o=r(a.default.env.KINDE_SITE_URL),s=a.default.env.KINDE_POST_LOGIN_ALLOWED_URL_REGEX,i=r(a.default.env.NEXT_PUBLIC_KINDE_AUTH_API_PATH)||r(a.default.env.KINDE_AUTH_API_PATH)||"/api/auth",u=r(a.default.env.KINDE_POST_LOGIN_REDIRECT_URL)||r(a.default.env.KINDE_POST_LOGIN_URL_REDIRECT_URL),c=r(a.default.env.KINDE_POST_LOGOUT_REDIRECT_URL),d=r(a.default.env.KINDE_ISSUER_URL),g=a.default.env.KINDE_CLIENT_ID,f=a.default.env.KINDE_CLIENT_SECRET,p=a.default.env.KINDE_AUDIENCE,h=r(a.default.env.KINDE_COOKIE_DOMAIN),x=a.default.env.KINDE_SCOPE||"openid profile email offline",_={isDebugMode:"true"===a.default.env.KINDE_DEBUG_MODE,apiPath:i,initialState:{accessToken:null,idToken:null,isAuthenticated:!1,isLoading:!0,organization:null,permissions:[],user:null,userOrganizations:[],getAccessToken:()=>null,getBooleanFlag:()=>null,getClaim:()=>null,getFlag:()=>null,getIdToken:()=>null,getIntegerFlag:()=>null,getOrganization:()=>null,getPermission:()=>null,getPermissions:()=>[],getStringFlag:()=>null,getToken:()=>null,getUser:()=>null,getUserOrganizations:()=>null,refreshData:()=>null},SESSION_PREFIX:"pkce-verifier",redirectURL:o,postLoginRedirectURL:u,postLoginAllowedURLRegex:s,issuerURL:d,clientID:g,clientSecret:f,postLogoutRedirectURL:c,audience:p?p.split(" "):"",cookieDomain:h,responseType:"code",codeChallengeMethod:"S256",redirectRoutes:{callback:"".concat(i,"/kinde_callback")},issuerRoutes:{logout:"/logout",login:"/oauth2/auth",register:"/oauth2/auth",token:"/oauth2/token",profile:"/oauth2/v2/user_profile"},clientOptions:{audience:p?p.split(" "):"",authDomain:d||"",clientId:g||"",clientSecret:f||"",logoutRedirectURL:c||"",redirectURL:"".concat(o).concat(i,"/kinde_callback"),frameworkVersion:"2.8.6",scope:x},grantType:"AUTHORIZATION_CODE"},E=e=>e&&/^[a-zA-Z0-9_-]+$/.test(e)?e:null,m={login:E(a.default.env.KINDE_AUTH_LOGIN_ROUTE)||"login",logout:E(a.default.env.KINDE_AUTH_LOGOUT_ROUTE)||"logout",register:E(a.default.env.KINDE_AUTH_REGISTER_ROUTE)||"register",createOrg:E(a.default.env.KINDE_AUTH_CREATEORG_ROUTE)||"create_org",health:E(a.default.env.KINDE_AUTH_HEALTH_ROUTE)||"health",setup:E(a.default.env.KINDE_AUTH_SETUP_ROUTE)||"setup",portal:E(a.default.env.KINDE_AUTH_PORTAL_ROUTE)||"portal"};function N(e){let{children:l,postLogoutRedirectURL:n,...a}=e;return(0,t.jsx)("a",{href:"".concat(_.apiPath,"/").concat(m.logout).concat(n?"?post_logout_redirect_url=".concat(n):""),...a,children:l})}var T=e.i(96004);function b(e){let{user:a}=e,[r,o]=(0,l.useState)(""),[s,i]=(0,l.useState)(""),[u,c]=(0,l.useState)(null),[d,g]=(0,l.useState)(""),[f,p]=(0,l.useState)(""),[h,x]=(0,l.useState)(""),[_,E]=(0,l.useState)(!1),m=(0,n.useRouter)(),b=async e=>{e.preventDefault(),x(""),E(!0);try{let e=new FormData;e.append("owner_id",a._id),e.append("title",r),e.append("description",s),e.append("content",f),u&&e.append("file",u);let t=await fetch("/api/posts",{method:"POST",body:e}),l=await t.json();t.ok?(console.log("✅ Post created with ID:",l._id),m.push("/post/"+[l._id])):x(l.error||"Aww, Failed to create post 😥")}catch(e){console.error("Error creating post:",e),x("Something went wrong 😥")}finally{E(!1)}};return(0,l.useEffect)(()=>{g(u?URL.createObjectURL(u):"")},[u]),(0,t.jsxs)("div",{className:"flex min-h-screen flex-col bg-gray-100",children:[(0,t.jsxs)("header",{className:"w-full flex items-center justify-between bg-white shadow px-8 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(null==a?void 0:a.picture)?(0,t.jsx)("a",{href:"/dashboard",children:(0,t.jsx)("img",{src:a.picture,alt:"Profile",className:"w-12 h-12 rounded-full object-cover"})}):(0,t.jsx)("span",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-2xl text-gray-400",children:"👤"}),(0,t.jsx)(T.default,{userAgent:a}),(0,t.jsx)("a",{href:"/dashboard",className:"rounded-xl border px-4 py-2 text-sm hover:text-blue-600 focus:text-blue-600 transition",children:"Dashboard"})]}),(0,t.jsx)(N,{className:"rounded-xl border px-4 py-2 text-sm hover:text-blue-600 focus:text-blue-600 transition",children:"Logout"})]}),(0,t.jsx)("main",{className:"flex flex-1 items-center justify-center px-4",children:(0,t.jsxs)("div",{className:"w-full max-w-4xl bg-white rounded-2xl shadow-lg p-10",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-8",children:"✍️ Create a New Post"}),(0,t.jsxs)("form",{onSubmit:b,className:"flex flex-col gap-6",children:[(0,t.jsx)("input",{type:"text",placeholder:"Post Title *",value:r,onChange:e=>o(e.target.value),className:"border rounded-lg px-5 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,t.jsx)("input",{type:"text",placeholder:"Short Description",value:s,onChange:e=>i(e.target.value),className:"border rounded-lg px-5 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,t.jsx)("input",{type:"file",placeholder:"Upload an image",accept:"image/*",onChange:e=>{var t;return c((null==(t=e.target.files)?void 0:t[0])||null)},className:"border rounded-lg px-5 py-3 text-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"}),d?(0,t.jsx)("img",{src:d,alt:"Profile",className:"w-10 h-10 rounded-full object-cover"}):(0,t.jsx)("span",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-2xl text-gray-400",children:"🖼️"}),(0,t.jsx)("textarea",{placeholder:"Write your content here... *",value:f,onChange:e=>p(e.target.value),className:"border rounded-lg px-5 py-4 text-lg min-h-[250px] focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),h&&(0,t.jsx)("p",{className:"text-red-500 font-medium",children:h}),(0,t.jsx)("button",{type:"submit",disabled:_,className:"rounded-lg px-6 py-3 text-lg font-semibold transition text-white ".concat(_?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:_?"Publishing...":"🚀 Publish Post"})]})]})})]})}}]);